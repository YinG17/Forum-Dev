<div class="m-2" *ngIf=" userService.user['info'] ">
  <app-info></app-info>
</div>

<div *ngIf=" userService.myInfo['id'] === userService.user['info']['id'] ">
  <button mat-raised-button color="primary" (click)=" postService.compose = !postService.compose ">CREATE POST</button>
  <div *ngIf=" postService.compose ">
    <app-post-create></app-post-create>
  </div>
</div>


<div class="m-2" *ngIf=" userService.user['posts'] ">

  <div class="mb-5" *ngIf=" userService.user['posts']['published'] ">
    <mat-card class=" mb-2 " *ngFor="let published of userService.user['posts']['published'] ">
      <mat-card-header>
        <mat-card-title>{{ published.post_title }}</mat-card-title>
        <mat-card-subtitle>{{ published.post_date }}</mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        <div class="mx-5" [innerHTML]="published.post_content"></div>
      </mat-card-content>
    </mat-card>
  </div>

  <div *ngIf=" userService.user['posts']['published'] === null ">
    <p> No posts .. </p>
  </div>

  <div *ngIf=" userService.isLogged && userService.user['posts']['drafts'] ">
    <h3> Drafts Posts (<small> not visible to other users </small>) </h3>
    <div class="m-2" *ngFor="let drafted of userService.user['posts']['drafts'] ">
      <div>{{ drafted | json }}</div>
      <button *ngIf=" userService.isLogged && userService.myInfo['id'] == drafted.post_author " (click)=" postService.getPost( '/' + drafted.ID ) ">
        EDIT
      </button>
    </div>
  </div>


</div>


<div class="m-2" *ngIf=" !userService.user ">

  Fetching Data ...

</div>
